<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg width="1200" height="900" xmlns="http://www.w3.org/2000/svg">
  <style>
    .title { font: bold 26px sans-serif; fill: #222; }
    .label { font: 16px sans-serif; fill: #222; }
    .box { fill: #f5f5fa; stroke: #444; stroke-width: 2; rx: 10; }
    .domain { fill: #e0f7fa; stroke: #00838f; stroke-width: 2; rx: 10; }
    .agent { fill: #fff3e0; stroke: #ef6c00; stroke-width: 2; rx: 10; }
    .tool { fill: #e8f5e9; stroke: #388e3c; stroke-width: 2; rx: 10; }
    .exp { fill: #f3e8fa; stroke: #7c43bd; stroke-width: 2; rx: 10; }
    .arrow { stroke: #444; stroke-width: 2; marker-end: url(#arrowhead); }
    .dashed { stroke-dasharray: 6,4; }
    .group { opacity: 0.12; }
  </style>
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#444"/>
    </marker>
  </defs>
  <text x="600" y="55" text-anchor="middle" class="title">SymbolicGym Architecture Overview</text>

  <!-- Group backgrounds -->
  <rect x="80" y="180" width="1040" height="100" fill="#e0f7fa" class="group"/>
  <rect x="80" y="650" width="1040" height="90" fill="#fff3e0" class="group"/>
  <rect x="900" y="540" width="280" height="180" fill="#e8f5e9" class="group"/>

  <!-- Core Environment -->
  <rect x="510" y="100" width="180" height="60" class="box"/>
  <text x="600" y="135" text-anchor="middle" class="label">Core Environment</text>
  <text x="600" y="155" text-anchor="middle" class="label">(AbstractSymbolicEnv)</text>

  <!-- Domains -->
  <rect x="140" y="220" width="180" height="60" class="domain"/>
  <text x="230" y="255" text-anchor="middle" class="label">SAT Domain</text>
  <rect x="540" y="220" width="180" height="60" class="domain"/>
  <text x="630" y="255" text-anchor="middle" class="label">SymPy Domain</text>
  <rect x="940" y="220" width="180" height="60" class="domain"/>
  <text x="1030" y="255" text-anchor="middle" class="label">Z3 Domain</text>
  <!-- Extensibility -->
  <rect x="370" y="220" width="140" height="60" class="exp"/>
  <text x="440" y="255" text-anchor="middle" class="label">Custom Domain</text>

  <!-- Domain Registry -->
  <rect x="540" y="320" width="180" height="60" class="box"/>
  <text x="630" y="355" text-anchor="middle" class="label">Domain Registry</text>

  <!-- Feedback & Representation -->
  <rect x="540" y="420" width="180" height="60" class="box"/>
  <text x="630" y="455" text-anchor="middle" class="label">Symbolic Feedback</text>
  <rect x="470" y="520" width="320" height="60" class="box"/>
  <text x="630" y="555" text-anchor="middle" class="label">Graph/Matrix Representation</text>

  <!-- Agents -->
  <rect x="140" y="700" width="140" height="60" class="agent"/>
  <text x="210" y="735" text-anchor="middle" class="label">DQN/PPO Agents</text>
  <rect x="320" y="700" width="140" height="60" class="agent"/>
  <text x="390" y="735" text-anchor="middle" class="label">GNN/CTDE Agents</text>
  <rect x="500" y="700" width="140" height="60" class="agent"/>
  <text x="570" y="735" text-anchor="middle" class="label">GRPO/MoE Agents</text>
  <rect x="680" y="700" width="140" height="60" class="agent"/>
  <text x="750" y="735" text-anchor="middle" class="label">Imitation</text>

  <!-- Tools -->
  <rect x="860" y="700" width="140" height="60" class="tool"/>
  <text x="930" y="735" text-anchor="middle" class="label">Interpretability</text>
  <rect x="1040" y="700" width="140" height="60" class="tool"/>
  <text x="1110" y="735" text-anchor="middle" class="label">Visualization</text>
  <rect x="1040" y="540" width="180" height="60" class="tool"/>
  <text x="1130" y="575" text-anchor="middle" class="label">Experiment/Logging</text>

  <!-- Arrows: Core Env to Domains -->
  <line x1="600" y1="160" x2="230" y2="220" class="arrow"/>
  <line x1="600" y1="160" x2="440" y2="220" class="arrow"/>
  <line x1="600" y1="160" x2="630" y2="220" class="arrow"/>
  <line x1="600" y1="160" x2="1030" y2="220" class="arrow"/>

  <!-- Domains to Registry -->
  <line x1="230" y1="280" x2="630" y2="320" class="arrow"/>
  <line x1="440" y1="280" x2="630" y2="320" class="arrow"/>
  <line x1="630" y1="280" x2="630" y2="320" class="arrow"/>
  <line x1="1030" y1="280" x2="630" y2="320" class="arrow"/>

  <!-- Registry to Feedback -->
  <line x1="630" y1="380" x2="630" y2="420" class="arrow"/>
  <!-- Feedback to Representation -->
  <line x1="630" y1="480" x2="630" y2="520" class="arrow"/>

  <!-- Representation to Agents -->
  <line x1="630" y1="580" x2="210" y2="700" class="arrow"/>
  <line x1="630" y1="580" x2="390" y2="700" class="arrow"/>
  <line x1="630" y1="580" x2="570" y2="700" class="arrow"/>
  <line x1="630" y1="580" x2="750" y2="700" class="arrow"/>

  <!-- Representation to Visualization/Interpretability/Experiment -->
  <line x1="790" y1="550" x2="1040" y2="570" class="arrow"/>
  <line x1="750" y1="700" x2="930" y2="700" class="arrow"/>
  <line x1="750" y1="700" x2="1110" y2="700" class="arrow"/>

  <!-- Experiment/Logging to Agents (dashed for feedback loop) -->
  <line x1="1130" y1="600" x2="750" y2="700" class="arrow dashed"/>

  <!-- Tools to Agents (dashed for feedback loop) -->
  <line x1="930" y1="700" x2="750" y2="700" class="arrow dashed"/>

  <!-- Legend (expanded and horizontally larger) -->
  <rect x="80" y="800" width="700" height="80" fill="#fff" stroke="#444" stroke-width="1" rx="8"/>
  <text x="100" y="825" class="label">Legend:</text>
  <rect x="120" y="840" width="24" height="24" class="domain"/>
  <text x="150" y="857" class="label">Domain</text>
  <rect x="220" y="840" width="24" height="24" class="agent"/>
  <text x="250" y="857" class="label">Agent</text>
  <rect x="320" y="840" width="24" height="24" class="tool"/>
  <text x="350" y="857" class="label">Tool/Analysis</text>
  <rect x="420" y="840" width="24" height="24" class="exp"/>
  <text x="450" y="857" class="label">Extensible/Custom</text>
  <line x1="500" y1="852" x2="540" y2="852" class="arrow"/>
  <text x="545" y="857" class="label">Main Flow</text>
  <line x1="600" y1="852" x2="640" y2="852" class="arrow dashed"/>
  <text x="645" y="857" class="label">Feedback/Analysis</text>
</svg>
